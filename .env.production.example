# ==========================================
# üöÄ CONFIGURA√á√ïES DE PRODU√á√ÉO
# ==========================================
# Telemetria Pioneira - Ambiente de Produ√ß√£o
# 
# INSTRU√á√ïES:
# 1. Copie este arquivo para .env.production
# 2. Substitua TODOS os valores <GERAR_*> usando o script generate-secrets.sh
# 3. Configure as credenciais reais de email e API
# 4. NUNCA commite o arquivo .env.production no Git!

# ==========================================
# üåç AMBIENTE
# ==========================================
NODE_ENV=production
HOST=0.0.0.0
PORT=3333

# ==========================================
# üóÑÔ∏è BANCO DE DADOS POSTGRESQL
# ==========================================
# IMPORTANTE: Em produ√ß√£o, use DATABASE_HOST=telemetria-postgres (nome do service)
DATABASE_TYPE=postgres
DATABASE_HOST=telemetria-postgres
DATABASE_PORT=5432
DATABASE_USERNAME=telemetria_prod
DATABASE_PASSWORD=<GERAR_DB_PASSWORD>
DATABASE_NAME=telemetriaPioneira_db
DATABASE_SCHEMA=public
DATABASE_SYNCHRONIZE=false
DATABASE_LOGGING=false
DATABASE_SSL=false

# Configura√ß√µes avan√ßadas
DATABASE_MAX_CONNECTIONS=20
DATABASE_CONNECTION_TIMEOUT=30000
DATABASE_QUERY_TIMEOUT=30000

# ==========================================
# üî¥ REDIS - CACHE E FILAS
# ==========================================
# IMPORTANTE: Use REDIS_HOST=telemetria-redis (nome do service)
REDIS_ENABLED=true
REDIS_HOST=telemetria-redis
REDIS_PORT=6379
REDIS_PASSWORD=<GERAR_REDIS_PASSWORD>
REDIS_DB=0
REDIS_TTL=3600
REDIS_MAX_MEMORY=512mb

# ==========================================
# üîê AUTENTICA√á√ÉO E SEGURAN√áA
# ==========================================
# CR√çTICO: NUNCA use as mesmas secrets de desenvolvimento!
# Execute: ./scripts/generate-secrets.sh para gerar secrets seguros
AUTH_ENABLED=true
AUTH_DATABASE=postgresql
JWT_SECRET=<GERAR_JWT_SECRET>
JWT_REFRESH_SECRET=<GERAR_JWT_REFRESH_SECRET>
JWT_EXPIRES_IN=8h
JWT_REFRESH_EXPIRES_IN=7d
BCRYPT_ROUNDS=12

# Configura√ß√µes de seguran√ßa
AUTH_SESSION_TIMEOUT=28800
AUTH_MAX_LOGIN_ATTEMPTS=5
AUTH_LOCKOUT_DURATION=900
PASSWORD_MIN_LENGTH=8
PASSWORD_REQUIRE_UPPERCASE=true
PASSWORD_REQUIRE_LOWERCASE=true
PASSWORD_REQUIRE_NUMBERS=true
PASSWORD_REQUIRE_SYMBOLS=true

# ==========================================
# üìß CONFIGURA√á√ïES DE E-MAIL
# ==========================================
EMAIL_ENABLED=true
EMAIL_DEBUG=false
EMAIL_LOG_ERRORS=true
EMAIL_TIMEOUT=60000
EMAIL_RETRY_ATTEMPTS=3
EMAIL_RETRY_DELAY=2000

# SMTP - Configure com suas credenciais reais
SMTP_HOST=mail.vpioneira.com.br
SMTP_PORT=587
SMTP_USER=suporte@vpioneira.com.br
SMTP_PASS=<CONFIGURAR_SENHA_SMTP>
SMTP_SECURE=false
SMTP_TLS=true
SMTP_STARTTLS=true
SMTP_IGNORE_TLS=false

# Remetente
EMAIL_FROM_NAME=Via√ß√£o Pioneira - Sistema de Telemetria
EMAIL_FROM_ADDRESS=suporte@vpioneira.com.br

# Templates
EMAIL_TEMPLATE_DIR=src/templates/email
EMAIL_RESET_PASSWORD_SUBJECT=Recupera√ß√£o de Senha - Telemetria
EMAIL_WELCOME_SUBJECT=Bem-vindo ao Sistema de Telemetria
EMAIL_PASSWORD_CHANGED_SUBJECT=Senha Alterada - Telemetria

# ==========================================
# üåê FRONTEND E URLS
# ==========================================
FRONTEND_URL=https://telemetria.vpioneira.com.br

# ==========================================
# üõ°Ô∏è CORS E SEGURAN√áA WEB
# ==========================================
# IMPORTANTE: Configure apenas os dom√≠nios autorizados
CORS_ORIGIN=https://telemetria.vpioneira.com.br
CORS_METHODS=GET,HEAD,PUT,PATCH,POST,DELETE,OPTIONS
CORS_ALLOWED_HEADERS=Content-Type,Authorization,X-Requested-With,Accept,Origin
CORS_CREDENTIALS=true
CORS_MAX_AGE=86400

# Helmet - Seguran√ßa HTTP
HELMET_ENABLED=true
HELMET_CSP_ENABLED=false
HELMET_CROSS_ORIGIN_EMBEDDER_POLICY=false

# Trust Proxy - Configure true se usar Nginx/Traefik
TRUST_PROXY=true

# ==========================================
# ‚ö° RATE LIMITING
# ==========================================
RATE_LIMIT_ENABLED=true
RATE_LIMIT_GLOBAL_TTL=60000
RATE_LIMIT_GLOBAL_LIMIT=100
RATE_LIMIT_AUTH_TTL=60000
RATE_LIMIT_AUTH_LIMIT=5
RATE_LIMIT_PASSWORD_RESET_TTL=60000
RATE_LIMIT_PASSWORD_RESET_LIMIT=3

# ==========================================
# üìä CONFIGURA√á√ïES DE APLICA√á√ÉO
# ==========================================
# Swagger - Desabilitado em produ√ß√£o por seguran√ßa
SWAGGER_ENABLED=false

# Admin - Desabilitar cria√ß√£o autom√°tica em produ√ß√£o
AUTO_CREATE_ADMIN=false
ADMIN_USERNAME=admin
ADMIN_EMAIL=felipebatista@vpioneira.com.br
ADMIN_PASSWORD=w4a3ay_cruy
ADMIN_FULL_NAME=Felipe Batista

# ==========================================
# üìù LOGS E MONITORAMENTO
# ==========================================
LOG_LEVEL=info
LOG_FILE_ENABLED=true
LOG_TO_FILE=true
LOG_TO_CONSOLE=true
LOG_FILE_PATH=logs/telemetria.log
LOG_MAX_FILES=10
LOG_MAX_SIZE=10m
ENABLE_METRICS=true
ENABLE_HEALTH_CHECK=true

# Logs espec√≠ficos - Desabilitar em produ√ß√£o
DEBUG_DATABASE=false
DEBUG_AUTH=false
DEBUG_EMAIL=false
DEBUG_CACHE=false

# Performance
LOG_SLOW_QUERIES=true
SLOW_QUERY_THRESHOLD=2000
LOG_CONNECTIONS=false
LOG_ERRORS=true
LOG_SECURITY_EVENTS=true

# ==========================================
# üßπ CONFIGURA√á√ïES DE LIMPEZA
# ==========================================
CLEANUP_ENABLED=true
CLEANUP_INTERVAL_MINUTES=60
CLEANUP_EXPIRED_TOKENS=true
CLEANUP_FAILED_LOGIN_ATTEMPTS=true

# ==========================================
# üîß DESENVOLVIMENTO - DESABILITAR EM PRODU√á√ÉO
# ==========================================
DEV_SEED_DATABASE=false
DEV_RESET_DATABASE=false
DEV_CREATE_SAMPLE_USERS=false

# ==========================================
# üöÄ CONFIGURA√á√ïES DE PERFORMANCE
# ==========================================
COMPRESSION_ENABLED=true
COMPRESSION_LEVEL=6
API_TIMEOUT=30000
API_RETRY_ATTEMPTS=3
API_RETRY_DELAY=1000

# ==========================================
# üìà MONITORAMENTO E HEALTH CHECK
# ==========================================
HEALTH_CHECK_ENABLED=true
HEALTH_CHECK_DATABASE=true
HEALTH_CHECK_MEMORY=true
HEALTH_CHECK_DISK=false

# ==========================================
# üîë CREDENCIAIS DA API MIX TELEMATICS
# ==========================================
# Configure com suas credenciais reais da API
MIX_USERNAME=suporte@vpioneira.com.br
MIX_PASSWORD=<CONFIGURAR_SENHA_MIX>
MIX_BASIC_AUTH_TOKEN=<CONFIGURAR_TOKEN_MIX>
MIX_SCOPE=offline_access MiX.Integrate

# ==========================================
# üìã CHECKLIST DE PRODU√á√ÉO
# ==========================================
# ‚úÖ Gerar secrets: ./scripts/generate-secrets.sh
# ‚úÖ Configurar senhas reais de SMTP
# ‚úÖ Configurar credenciais MIX Telematics
# ‚úÖ Configurar senha do admin
# ‚úÖ Configurar CORS_ORIGIN com dom√≠nio real
# ‚úÖ Desabilitar SWAGGER_ENABLED=false
# ‚úÖ Desabilitar AUTO_CREATE_ADMIN=false
# ‚úÖ Desabilitar todos os DEBUG_*=false
# ‚úÖ Verificar TRUST_PROXY se usar reverse proxy
# ‚úÖ Backup do .env.production em local seguro