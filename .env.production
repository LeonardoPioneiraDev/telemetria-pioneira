# ==========================================
#  CONFIGURAÇÕES DE PRODUÇÃO
# ==========================================
# Telemetria Pioneira - Ambiente de Produção
# 
# INSTRUÇÕES:
# 1. Copie este arquivo para .env.production
# 2. Substitua TODOS os valores <GERAR_*> usando o script generate-secrets.sh
# 3. Configure as credenciais reais de email e API
# 4. NUNCA commite o arquivo .env.production no Git!

# ==========================================
#  AMBIENTE
# ==========================================
NODE_ENV=production
HOST=0.0.0.0
PORT=3333

# ==========================================
# ️ BANCO DE DADOS POSTGRESQL
# ==========================================
# IMPORTANTE: Em produção, use DATABASE_HOST=telemetria-postgres (nome do service)
DATABASE_TYPE=postgres
DATABASE_HOST=telemetria-postgres
DATABASE_PORT=5432
DATABASE_USERNAME=telemetria_prod
DATABASE_PASSWORD=v8pa6rB1FLxoPY6yVX17LJjm9N9wIYQU
DATABASE_NAME=telemetriaPioneira_db
DATABASE_SCHEMA=public
DATABASE_SYNCHRONIZE=false
DATABASE_LOGGING=false
DATABASE_SSL=false

# Configurações avançadas
DATABASE_MAX_CONNECTIONS=20
DATABASE_CONNECTION_TIMEOUT=30000
DATABASE_QUERY_TIMEOUT=30000

# ==========================================
#  REDIS - CACHE E FILAS
# ==========================================
# IMPORTANTE: Use REDIS_HOST=telemetria-redis (nome do service)
REDIS_ENABLED=true
REDIS_HOST=telemetria-redis
REDIS_PORT=6379
REDIS_PASSWORD=
REDIS_DB=0
REDIS_TTL=3600
REDIS_MAX_MEMORY=512mb

# ==========================================
#  AUTENTICAÇÃO E SEGURANÇA
# ==========================================
# CRÍTICO: NUNCA use as mesmas secrets de desenvolvimento!
# Execute: ./scripts/generate-secrets.sh para gerar secrets seguros
AUTH_ENABLED=true
AUTH_DATABASE=postgresql
JWT_SECRET=xJjG2TXe2kYHwL4Tzx4rLVigXPPNZyowhkkPUIBAAnPrqQALZ496yc1ONmus
yB0hp8kmZxGwWTFEiyfhiw
JWT_REFRESH_SECRET=h64SNrx0oyGNXDutwEHNacutKp8VKeHl1eiBrjdQPekR4AEtUjb4TLhzJ0ES6CB
UMdGx0ZlCsfDAakP2Enw
JWT_EXPIRES_IN=8h
JWT_REFRESH_EXPIRES_IN=7d
BCRYPT_ROUNDS=12

# Configurações de segurança
AUTH_SESSION_TIMEOUT=28800
AUTH_MAX_LOGIN_ATTEMPTS=5
AUTH_LOCKOUT_DURATION=900
PASSWORD_MIN_LENGTH=8
PASSWORD_REQUIRE_UPPERCASE=true
PASSWORD_REQUIRE_LOWERCASE=true
PASSWORD_REQUIRE_NUMBERS=true
PASSWORD_REQUIRE_SYMBOLS=true

# ==========================================
#  CONFIGURAÇÕES DE E-MAIL
# ==========================================
EMAIL_ENABLED=true
EMAIL_DEBUG=false
EMAIL_LOG_ERRORS=true
EMAIL_TIMEOUT=60000
EMAIL_RETRY_ATTEMPTS=3
EMAIL_RETRY_DELAY=2000

# SMTP - Configure com suas credenciais reais
SMTP_HOST=mail.vpioneira.com.br
SMTP_PORT=587
SMTP_USER=suporte@vpioneira.com.br
SMTP_PASS=564139
SMTP_SECURE=false
SMTP_TLS=true
SMTP_STARTTLS=true
SMTP_IGNORE_TLS=false

# Remetente
EMAIL_FROM_NAME=Viação Pioneira - Sistema de Telemetria
EMAIL_FROM_ADDRESS=suporte@vpioneira.com.br

# Templates
EMAIL_TEMPLATE_DIR=src/templates/email
EMAIL_RESET_PASSWORD_SUBJECT=Recuperação de Senha - Telemetria
EMAIL_WELCOME_SUBJECT=Bem-vindo ao Sistema de Telemetria
EMAIL_PASSWORD_CHANGED_SUBJECT=Senha Alterada - Telemetria

# ==========================================
#  FRONTEND E URLS
# ==========================================
FRONTEND_URL=https://telemetria.vpioneira.com.br

# ==========================================
# ️ CORS E SEGURANÇA WEB
# ==========================================
# IMPORTANTE: Configure apenas os domínios autorizados
CORS_ORIGIN=https://telemetria.vpioneira.com.br
CORS_METHODS=GET,HEAD,PUT,PATCH,POST,DELETE,OPTIONS
CORS_ALLOWED_HEADERS=Content-Type,Authorization,X-Requested-With,Accept,Origin
CORS_CREDENTIALS=true
CORS_MAX_AGE=86400

# Helmet - Segurança HTTP
HELMET_ENABLED=true
HELMET_CSP_ENABLED=false
HELMET_CROSS_ORIGIN_EMBEDDER_POLICY=false

# Trust Proxy - Configure true se usar Nginx/Traefik
TRUST_PROXY=true

# ==========================================
# ⚡ RATE LIMITING
# ==========================================
RATE_LIMIT_ENABLED=true
RATE_LIMIT_GLOBAL_TTL=60000
RATE_LIMIT_GLOBAL_LIMIT=100
RATE_LIMIT_AUTH_TTL=60000
RATE_LIMIT_AUTH_LIMIT=5
RATE_LIMIT_PASSWORD_RESET_TTL=60000
RATE_LIMIT_PASSWORD_RESET_LIMIT=3

# ==========================================
#  CONFIGURAÇÕES DE APLICAÇÃO
# ==========================================
# Swagger - Desabilitado em produção por segurança
SWAGGER_ENABLED=false

# Admin - Desabilitar criação automática em produção
AUTO_CREATE_ADMIN=false
ADMIN_USERNAME=admin
ADMIN_EMAIL=felipebatista@vpioneira.com.br
ADMIN_PASSWORD=w4a3ay_cruy
ADMIN_FULL_NAME=Felipe Batista

# ==========================================
#  LOGS E MONITORAMENTO
# ==========================================
LOG_LEVEL=info
LOG_FILE_ENABLED=true
LOG_TO_FILE=true
LOG_TO_CONSOLE=true
LOG_FILE_PATH=logs/telemetria.log
LOG_MAX_FILES=10
LOG_MAX_SIZE=10m
ENABLE_METRICS=true
ENABLE_HEALTH_CHECK=true

# Logs específicos - Desabilitar em produção
DEBUG_DATABASE=false
DEBUG_AUTH=false
DEBUG_EMAIL=false
DEBUG_CACHE=false

# Performance
LOG_SLOW_QUERIES=true
SLOW_QUERY_THRESHOLD=2000
LOG_CONNECTIONS=false
LOG_ERRORS=true
LOG_SECURITY_EVENTS=true

# ==========================================
# 粒 CONFIGURAÇÕES DE LIMPEZA
# ==========================================
CLEANUP_ENABLED=true
CLEANUP_INTERVAL_MINUTES=60
CLEANUP_EXPIRED_TOKENS=true
CLEANUP_FAILED_LOGIN_ATTEMPTS=true

# ==========================================
#  DESENVOLVIMENTO - DESABILITAR EM PRODUÇÃO
# ==========================================
DEV_SEED_DATABASE=false
DEV_RESET_DATABASE=false
DEV_CREATE_SAMPLE_USERS=false

# ==========================================
#  CONFIGURAÇÕES DE PERFORMANCE
# ==========================================
COMPRESSION_ENABLED=true
COMPRESSION_LEVEL=6
API_TIMEOUT=30000
API_RETRY_ATTEMPTS=3
API_RETRY_DELAY=1000

# ==========================================
#  MONITORAMENTO E HEALTH CHECK
# ==========================================
HEALTH_CHECK_ENABLED=true
HEALTH_CHECK_DATABASE=true
HEALTH_CHECK_MEMORY=true
HEALTH_CHECK_DISK=false

# ==========================================
#  CREDENCIAIS DA API MIX TELEMATICS
# ==========================================
# Configure com suas credenciais reais da API
MIX_USERNAME=suporte@vpioneira.com.br
MIX_PASSWORD=Vpio2@2425262728
MIX_BASIC_AUTH_TOKEN=bWl4YnJwaW9uZWlyYTppRGd1dHduWVhRbmxrdXcx
MIX_SCOPE="offline_access MiX.Integrate"

# ==========================================
#  CHECKLIST DE PRODUÇÃO
# ==========================================
# ✅ Gerar secrets: ./scripts/generate-secrets.sh
# ✅ Configurar senhas reais de SMTP
# ✅ Configurar credenciais MIX Telematics
# ✅ Configurar senha do admin
# ✅ Configurar CORS_ORIGIN com domínio real
# ✅ Desabilitar SWAGGER_ENABLED=false
# ✅ Desabilitar AUTO_CREATE_ADMIN=false
# ✅ Desabilitar todos os DEBUG_*=false
# ✅ Verificar TRUST_PROXY se usar reverse proxy
# ✅ Backup do .env.production em local seguro